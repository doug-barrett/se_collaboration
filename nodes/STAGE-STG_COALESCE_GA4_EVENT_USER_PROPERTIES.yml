steps:
  STG_COALESCE_GA4_EVENT_USER_PROPERTIES-a4080f6f-1372-464b-a42b-29eea277eeb0:
    operation:
      config:
        insertStrategy: INSERT
        postSQL: ""
        preSQL: ""
        selectDistinct: false
        testsEnabled: true
        truncateBefore: true
      database: ""
      deployEnabled: true
      description: ""
      isMultisource: false
      locationName: STAGE
      materializationType: view
      metadata:
        appliedNodeTests: []
        columns:
          - acceptedValues:
              strictMatch: false
              values: []
            appliedColumnTests: {}
            columnReference:
              columnCounter: 79785e91-2d9a-402e-89ed-4c284399b794
              stepCounter: a4080f6f-1372-464b-a42b-29eea277eeb0
            dataType: STRING
            description: ""
            name: EVENT_KEY
            nullable: true
            sourceColumnReferences:
              - columnReferences:
                  - columnCounter: c98dbe5c-42d4-4d31-9b2f-4b29b8707b20
                    stepCounter: 6a56ab9e-8568-4581-8d13-989c65ed5ff2
                transform: ""
          - acceptedValues:
              strictMatch: true
              values: []
            appliedColumnTests: {}
            columnReference:
              columnCounter: 712dacd8-c84d-4fcc-973f-cc037d831faa
              stepCounter: a4080f6f-1372-464b-a42b-29eea277eeb0
            config: {}
            dataType: STRING
            description: ""
            name: USER_PROP_KEY
            nullable: true
            sourceColumnReferences:
              - columnReferences: []
                transform: "\"USER_PROPERTIES\".value:\"key\"::STRING"
          - acceptedValues:
              strictMatch: true
              values: []
            appliedColumnTests: {}
            columnReference:
              columnCounter: 80c90c16-71f4-4993-a9ac-34efcfd58485
              stepCounter: a4080f6f-1372-464b-a42b-29eea277eeb0
            config: {}
            dataType: DOUBLE
            description: ""
            name: USER_PROP_DOUBLE_VALUE
            nullable: true
            sourceColumnReferences:
              - columnReferences: []
                transform: |2
                   "USER_PROPERTIES".value:"value"."double_value"::DOUBLE
          - acceptedValues:
              strictMatch: true
              values: []
            appliedColumnTests: {}
            columnReference:
              columnCounter: bcad036c-d73a-421d-ab86-51e9c893c1cc
              stepCounter: a4080f6f-1372-464b-a42b-29eea277eeb0
            config: {}
            dataType: STRING
            description: ""
            name: USER_PROP_INT_VALUE
            nullable: true
            sourceColumnReferences:
              - columnReferences: []
                transform: "\"USER_PROPERTIES\".value:\"value\".\"int_value\"::STRING"
          - acceptedValues:
              strictMatch: true
              values: []
            appliedColumnTests: {}
            columnReference:
              columnCounter: 266dc518-8a86-49c7-b33d-01b9836ded19
              stepCounter: a4080f6f-1372-464b-a42b-29eea277eeb0
            config: {}
            dataType: STRING
            description: ""
            name: USER_PROP_TIMESTAMP_MICROS
            nullable: true
            sourceColumnReferences:
              - columnReferences: []
                transform: "\"USER_PROPERTIES\".value:\"value\".\"set_timestamp_micros\"::STRING"
          - acceptedValues:
              strictMatch: true
              values: []
            appliedColumnTests: {}
            columnReference:
              columnCounter: 6c2902a0-8cf4-42e9-b45a-25c226e1d033
              stepCounter: a4080f6f-1372-464b-a42b-29eea277eeb0
            config: {}
            dataType: STRING
            description: ""
            name: USER_PROP_STRING_VALUE
            nullable: true
            sourceColumnReferences:
              - columnReferences: []
                transform: "\"USER_PROPERTIES\".value:\"value\".\"string_value\"::STRING"
          - acceptedValues:
              strictMatch: true
              values: []
            appliedColumnTests: {}
            columnReference:
              columnCounter: dceede6c-c245-4bbb-831b-2f2e3e1e9167
              stepCounter: a4080f6f-1372-464b-a42b-29eea277eeb0
            config: {}
            dataType: STRING
            description: ""
            name: USER_PROP_VALUE
            nullable: true
            sourceColumnReferences:
              - columnReferences: []
                transform: |-
                  COALESCE( "USER_PROPERTIES".value:"value"."string_value"::STRING,
                   "USER_PROPERTIES".value:"value"."double_value"::STRING,
                   "USER_PROPERTIES".value:"value"."int_value"::STRING,
                  '')
        cteString: ""
        enabledColumnTestIDs: []
        sourceMapping:
          - aliases:
              STG_COALESCE_GA4_EVENT_ALL: 6a56ab9e-8568-4581-8d13-989c65ed5ff2
            customSQL:
              customSQL: ""
            dependencies:
              - locationName: STAGE
                nodeName: STG_COALESCE_GA4_EVENT_ALL
            join:
              joinCondition: |-
                FROM {{ ref('STAGE', 'STG_COALESCE_GA4_EVENT_ALL') }} "STG_COALESCE_GA4_EVENT_ALL", 
                lateral flatten(input => "USER_PROPERTIES", OUTER => TRUE) "USER_PROPERTIES"
                WHERE ARRAY_SIZE("USER_PROPERTIES") > 0
            name: STG_COALESCE_GA4_EVENT_USER_PROPERTIES
            noLinkRefs: []
      name: STG_COALESCE_GA4_EVENT_USER_PROPERTIES
      overrideSQL: false
      schema: ""
      sqlType: View
      type: sql
    stepCounter: a4080f6f-1372-464b-a42b-29eea277eeb0
