fileVersion: 1
id: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
name: STG_COALESCE_GA4_EVENT_ITEMS
operation:
  config:
    insertStrategy: INSERT
    postSQL: ""
    preSQL: ""
    testsEnabled: true
    truncateBefore: true
  database: ""
  deployEnabled: true
  description: ""
  isMultisource: false
  locationName: STAGE
  materializationType: table
  metadata:
    appliedNodeTests: []
    columns:
      - acceptedValues:
          strictMatch: false
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: ef28c0e4-7333-44a9-b5bf-f238905e9ff4
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: EVENT_KEY
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: c98dbe5c-42d4-4d31-9b2f-4b29b8707b20
                stepCounter: 6a56ab9e-8568-4581-8d13-989c65ed5ff2
            transform: ""
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: e3776b32-0167-442f-b8d8-b21f3121c120
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: AFFILIATION
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"affiliation\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 7a359cad-e297-417c-b5a3-3f12c26a1093
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: COUPON
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"coupon\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 9d0aefaf-d0ab-4579-9409-44a35325a026
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: CREATIVE_NAME
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"creative_name\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 4054b20a-ea39-4cc2-b34c-1ab39cf57e45
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: CREATIVE_SLOT
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"creative_slot\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 1ef80877-f6b0-424c-bdc0-ffcd49e956b6
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: ITEM_BRAND
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"item_brand\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: d96cc74f-c409-40e7-b895-36aac3eecc97
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: ITEM_CATEGORY
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"item_category\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 686dea6f-c008-4e20-8222-900b73634977
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: ITEM_CATEGORY2
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"item_category2\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: e6b30ba5-03d5-444e-b06c-286b09717b6a
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: ITEM_CATEGORY3
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"item_category3\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 1b544adc-014e-44fc-a2fa-7dfd5ef9fac5
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: ITEM_CATEGORY4
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"item_category4\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 0ac1a061-9b5a-4d88-b44a-6322720ba200
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: ITEM_CATEGORY5
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"item_category5\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 72f23b5b-52d7-4769-a4dc-dd78f9267ba5
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: ITEM_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"item_id\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 202d4de8-789a-4457-94f7-36c6b59de36f
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: ITEM_LIST_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"item_list_id\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: a58d1a64-ebaa-4fec-89ab-19dbdf9d4cc3
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: ITEM_LIST_INDEX
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"item_list_index\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 3b238a0e-1f44-4fb1-936e-297a098934d3
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: ITEM_LIST_NAME
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"item_list_name\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 5610ce4e-b119-47a6-8ef5-a397efef616f
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: ITEM_NAME
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"item_name\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 07870727-186a-4a2b-81ec-8256ef6f6d02
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: VARIANT
        description: ""
        name: ITEM_PARAMS
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"item_params\"::VARIANT"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: ea7375ed-273d-49b5-bd68-80d4cb6fc8ef
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: DOUBLE
        description: ""
        name: ITEM_REVENUE
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"item_revenue\"::DOUBLE"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 2823c705-e789-43b4-af94-266a585acf74
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: DOUBLE
        description: ""
        name: ITEM_REVENUE_IN_USD
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"item_revenue_in_usd\"::DOUBLE"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 4d43dabe-87da-4a31-9c35-a95584002d5a
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: ITEM_VARIANT
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"item_variant\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 148ed8a5-b7ae-463e-98d8-8dbd43e95c53
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: LOCATION_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"location_id\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: d03707a7-2fae-4057-929c-c4321917a6c8
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: DOUBLE
        description: ""
        name: PRICE
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"price\"::DOUBLE"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 113d9b10-b9a2-4f2a-9efd-f44419dcb5c5
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: DOUBLE
        description: ""
        name: PRICE_IN_USD
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"price_in_usd\"::DOUBLE"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: a04c95de-4203-495b-8bb7-ac926b51b460
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: PROMOTION_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"promotion_id\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 28613964-9c0d-45cd-98e6-9c3c342052f2
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: PROMOTION_NAME
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"promotion_name\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 18d43e98-a264-4e4e-8edb-b2fe8a98024e
          stepCounter: 31e1e6eb-07fe-41b5-bba1-0e9ac2ad502f
        config: {}
        dataType: STRING
        description: ""
        name: QUANTITY
        nullable: true
        sourceColumnReferences:
          - columnReferences: []
            transform: "\"ITEMS\".value:\"quantity\"::STRING"
    cteString: ""
    enabledColumnTestIDs: []
    sourceMapping:
      - aliases:
          STG_COALESCE_GA4_EVENT_ALL: 6a56ab9e-8568-4581-8d13-989c65ed5ff2
        customSQL:
          customSQL: ""
        dependencies:
          - locationName: STAGE
            nodeName: STG_COALESCE_GA4_EVENT_ALL
        join:
          joinCondition: |
            FROM {{ ref('STAGE', 'STG_COALESCE_GA4_EVENT_ALL') }} "STG_COALESCE_GA4_EVENT_ALL", 
            lateral flatten(input => "ITEMS", OUTER => TRUE) "ITEMS"
            WHERE ARRAY_SIZE("ITEMS") > 0
        name: STG_COALESCE_GA4_EVENT_ITEMS
        noLinkRefs: []
  name: STG_COALESCE_GA4_EVENT_ITEMS
  overrideSQL: false
  schema: ""
  sqlType: Stage
  type: sql
  version: 1
type: Node
